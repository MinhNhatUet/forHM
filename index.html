<!DOCTYPE html>
<html lang="vi">

<head>
    <style>
        /* Starfield upgrade */
        
        .star {
            position: absolute;
            border-radius: 50%;
            opacity: 0.7;
            pointer-events: none;
            z-index: 1;
            animation: starTwinkle 2.5s infinite alternate;
        }
        
        @keyframes starTwinkle {
            0% {
                opacity: 0.5;
                filter: blur(0px);
            }
            50% {
                opacity: 1;
                filter: blur(1.5px);
            }
            100% {
                opacity: 0.3;
                filter: blur(0.5px);
            }
        }
        
        .star.star-big {
            width: 4px;
            height: 4px;
            background: #fffbe7;
            animation-duration: 3.5s;
        }
        
        .star.star-medium {
            width: 2.5px;
            height: 2.5px;
            background: #e0e7ff;
            animation-duration: 2.2s;
        }
        
        .star.star-small {
            width: 1.2px;
            height: 1.2px;
            background: #fff;
            animation-duration: 1.5s;
        }
        
        .star.star-yellow {
            background: #ffe066;
        }
        
        .star.star-blue {
            background: #a5b4fc;
        }
        
        .star.star-pink {
            background: #ffd6e0;
        }
        
        .star.star-move {
            animation: starMove 8s linear infinite, starTwinkle 2.5s infinite alternate;
        }
        
        @keyframes starMove {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(40px);
            }
        }
        /* Petal upgrade */
        
        .floating-petal {
            position: absolute;
            top: -40px;
            width: 32px;
            height: 32px;
            pointer-events: none;
            opacity: 0.85;
            z-index: 2;
            animation: petalFall 18s linear forwards;
        }
        
        @keyframes petalFall {
            0% {
                opacity: 0.7;
                transform: rotate(0deg) scale(1) translateX(0);
            }
            60% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: rotate(360deg) scale(0.7) translateX(60px);
            }
        }
        
        .petal-1 {
            background: url('images/petal1.png') no-repeat center/contain;
        }
        
        .petal-2 {
            background: url('images/petal2.png') no-repeat center/contain;
        }
        
        .petal-3 {
            background: url('images/petal3.png') no-repeat center/contain;
        }
        
        .petal-4 {
            background: url('images/petal4.png') no-repeat center/contain;
        }
        
        .petal-5 {
            background: url('images/petal5.png') no-repeat center/contain;
        }
        
        .petal-pink {
            filter: hue-rotate(0deg) saturate(1.2);
        }
        
        .petal-yellow {
            filter: hue-rotate(60deg) saturate(1.1);
        }
        
        .petal-blue {
            filter: hue-rotate(200deg) saturate(1.1);
        }
        
        .petal-rotate {
            animation: petalFall 18s linear forwards, petalSpin 6s linear infinite;
        }
        
        @keyframes petalSpin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cho ebe n√®</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Dancing+Script:wght@400;600;700&family=Cinzel:wght@400;600&display=swap');
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Playfair Display', serif;
            background: #000;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        /* Starfield background */
        
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }
        
        @keyframes twinkle {
            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        /* Enhanced floating petals */
        
        .petal-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .floating-petal {
            position: absolute;
            animation: float 20s infinite linear;
            opacity: 0.8;
        }
        
        .petal-1 {
            width: 12px;
            height: 12px;
            background: radial-gradient(ellipse, rgba(255, 182, 193, 0.8), rgba(255, 105, 180, 0.4));
            border-radius: 50% 0 50% 0;
            transform: rotate(45deg);
        }
        
        .petal-2 {
            width: 8px;
            height: 16px;
            background: linear-gradient(45deg, rgba(218, 112, 214, 0.7), rgba(255, 20, 147, 0.3));
            border-radius: 50% 50% 50% 0;
        }
        
        .petal-3 {
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, rgba(255, 192, 203, 0.9), rgba(255, 182, 193, 0.2));
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }
        
        .petal-4 {
            width: 6px;
            height: 14px;
            background: linear-gradient(90deg, rgba(147, 112, 219, 0.8), rgba(138, 43, 226, 0.4));
            border-radius: 50%;
            transform: rotate(30deg);
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            50% {
                transform: translateY(50vh) rotate(180deg) translateX(20px);
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) translateX(-20px);
                opacity: 0;
            }
        }
        
        .container {
            position: relative;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .solar-system {
            position: relative;
            width: 100%;
            height: 1000px;
            margin: 2rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(ellipse at center, rgba(255, 215, 0, 0.05) 0%, transparent 70%);
            overflow: hidden;
        }
        /* Clean Sun */
        
        .sun {
            position: absolute;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            z-index: 10;
            cursor: pointer;
            transition: all 0.4s ease;
        }
        
        .sun:hover {
            transform: scale(1.2);
        }
        /* Clean Even Orbits */
        
        .orbit {
            position: absolute;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: rotate 20s linear infinite;
            pointer-events: none;
        }
        
        .orbit:nth-child(2) {
            width: 120px;
            height: 120px;
            animation-duration: 10s;
        }
        
        .orbit:nth-child(3) {
            width: 160px;
            height: 160px;
            animation-duration: 15s;
        }
        
        .orbit:nth-child(4) {
            width: 200px;
            height: 200px;
            animation-duration: 20s;
        }
        
        .orbit:nth-child(5) {
            width: 240px;
            height: 240px;
            animation-duration: 25s;
        }
        
        .orbit:nth-child(6) {
            width: 280px;
            height: 280px;
            animation-duration: 30s;
        }
        
        .orbit:nth-child(7) {
            width: 320px;
            height: 320px;
            animation-duration: 35s;
        }
        
        .orbit:nth-child(8) {
            width: 360px;
            height: 360px;
            animation-duration: 40s;
        }
        
        .orbit:nth-child(9) {
            width: 400px;
            height: 400px;
            animation-duration: 45s;
        }
        
        .orbit:nth-child(10) {
            width: 440px;
            height: 440px;
            animation-duration: 50s;
        }
        
        .orbit:nth-child(11) {
            width: 480px;
            height: 480px;
            animation-duration: 55s;
        }
        
        .orbit:nth-child(12) {
            width: 520px;
            height: 520px;
            animation-duration: 60s;
        }
        
        .orbit:nth-child(13) {
            width: 560px;
            height: 560px;
            animation-duration: 65s;
        }
        
        .orbit:nth-child(14) {
            width: 600px;
            height: 600px;
            animation-duration: 70s;
        }
        
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        /* Enhanced Planets */
        
        .planet {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            transition: all 0.4s ease, opacity 0.3s ease, transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: planetFloat 6s ease-in-out infinite, iconChange 3s ease-in-out infinite;
            transform: translate(-50%, -50%);
            z-index: 200;
            pointer-events: auto;
        }
        
        @keyframes planetFloat {
            0%,
            100% {
                transform: translate(-50%, -50%) translateY(0px);
            }
            50% {
                transform: translate(-50%, -50%) translateY(-5px);
            }
        }
        
        @keyframes iconChange {
            0% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            25% {
                transform: translate(-50%, -50%) scale(1.1) rotate(90deg);
            }
            50% {
                transform: translate(-50%, -50%) scale(1) rotate(180deg);
            }
            75% {
                transform: translate(-50%, -50%) scale(1.1) rotate(270deg);
            }
            100% {
                transform: translate(-50%, -50%) scale(1) rotate(360deg);
            }
        }
        
        .planet:hover {
            transform: translate(-50%, -50%) scale(1.4) translateY(-5px);
            z-index: 2000;
        }
        /* Navigation */
        
        .nav-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .nav {
            display: flex;
            gap: 10px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: white;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .nav-icon {
            font-size: 18px;
        }
        
        .nav-text {
            font-size: 13px;
        }
        /* Beautiful Card Interface */
        
        .card-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 450px;
            display: none;
            z-index: 100;
            animation: cardSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .card-container.active {
            display: block;
        }
        
        @keyframes cardSlideIn {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8) translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) translateY(0);
            }
        }
        
        .message-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.08), 0 4px 8px rgba(0, 0, 0, 0.04);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }
        
        .message-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.2) 100%);
            pointer-events: none;
            z-index: 1;
        }
        
        .card-header {
            position: relative;
            z-index: 2;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ff6b9d 100%);
            padding: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
            z-index: -1;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
            color: white;
        }
        
        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9d, #feca57, #ff9a56);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            border: 3px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .avatar::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: avatarShine 3s ease-in-out infinite;
        }
        
        @keyframes avatarShine {
            0%,
            100% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }
            50% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }
        
        .user-details h3 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .user-details .status {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-top: 2px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .online-indicator {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            border: 2px solid white;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.1);
            }
        }
        
        .close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            backdrop-filter: blur(10px);
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .card-content {
            position: relative;
            z-index: 2;
            padding: 24px;
        }
        
        .message-image-container {
            position: relative;
            width: 100%;
            height: 240px;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .message-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .message-image-container:hover img {
            transform: scale(1.05);
        }
        
        #messageImage {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: white;
        }
        
        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient( 135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 50%, rgba(255, 107, 157, 0.1) 100%);
        }
        
        .message-bubble {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .message-bubble::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 24px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid #f8fafc;
            filter: drop-shadow(0 -2px 2px rgba(0, 0, 0, 0.05));
        }
        
        .message-text {
            font-size: 1rem;
            line-height: 1.6;
            color: #334155;
            margin: 0;
            font-family: 'Playfair Display', serif;
        }
        
        .message-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
        }
        
        .message-time {
            color: #64748b;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .time-icon {
            font-size: 0.75rem;
        }
        
        .message-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 999;
        }
        /* Simple Modal Interface */
        
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ffffff;
            border-radius: 12px;
            max-width: 450px;
            width: 90%;
            max-height: 70vh;
            padding: 0;
            display: none;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            animation: modalAppear 0.3s ease-out;
            overflow: hidden;
        }
        
        .modal.active {
            display: block !important;
        }
        
        .overlay.active {
            display: block !important;
        }
        
        @keyframes modalAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .modal .close-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.1);
            border: none;
            font-size: 18px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: #666;
        }
        
        .modal .close-btn:hover {
            background: rgba(0, 0, 0, 0.2);
            transform: scale(1.1);
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            border-bottom: 1px solid #f0f0f0;
            background: #fafafa;
        }
        
        .modal-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #e5e5e5;
            flex-shrink: 0;
        }
        
        .modal-title {
            font-size: 17px;
            font-weight: 600;
            color: #1a1a1a;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            flex-grow: 1;
        }
        
        .modal-content {
            padding: 18px 20px;
            max-height: 50vh;
            overflow-y: auto;
        }
        
        .modal-image {
            width: 100%;
            max-height: 200px;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            margin: 0 0 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: block;
        }
        
        .modal-messages {
            text-align: left;
        }
        
        .modal-message {
            font-size: 19px;
            line-height: 1.4;
            color: #333;
            margin: 0;
            padding: 14px 16px;
            background: #f8f9fa;
            border-radius: 18px;
            border: 1px solid #e9ecef;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            position: relative;
        }
        
        .modal-message:before {
            content: '';
            position: absolute;
            left: -8px;
            top: 12px;
            width: 0;
            height: 0;
            border: 8px solid transparent;
            border-right: 8px solid #f8f9fa;
        }
        
        .modal-message:last-child {
            margin-bottom: 0;
        }
        
        .admin-panel {
            margin-top: 16px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            text-align: left;
        }
        
        .admin-panel h3 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .message-editor-item {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }
        
        .message-editor-item textarea {
            flex: 1;
            min-height: 60px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Playfair Display', serif;
            font-size: 14px;
            resize: vertical;
        }
        
        .message-editor-item .btn-remove {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .admin-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
            font-family: inherit;
        }
        
        .admin-btn:hover,
        .message-editor-item .btn-remove:hover {
            opacity: 0.8;
        }
        
        .save-btn {
            background: #28a745 !important;
        }
        
        .admin-toggle {
            position: absolute;
            bottom: 16px;
            right: 16px;
            background: #667eea;
            color: white;
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            width: 36px;
            height: 36px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        
        .admin-toggle:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }
        
        .admin-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 5px 5px 5px 0;
            transition: all 0.3s ease;
        }
        
        .admin-btn:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        
        .admin-btn.save-btn {
            background: #28a745;
        }
        
        .admin-btn.save-btn:hover {
            background: #218838;
        }
        
        .admin-btn.delete-btn {
            background: #dc3545;
            padding: 8px 12px;
        }
        
        .admin-btn.delete-btn:hover {
            background: #c82333;
        }
        /* Taskbar with round image buttons */
        
        .taskbar {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 24px;
            padding: 18px 0 14px 0;
            background: rgba(20, 20, 30, 0.85);
            box-shadow: 0 -2px 16px 0 rgba(0, 0, 0, 0.18);
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
        }
        
        .taskbar-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
            border: 3px solid #e0e0e0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.18s, box-shadow 0.18s;
            position: relative;
        }
        
        .taskbar-btn:hover {
            transform: scale(1.12);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.18);
            border-color: #a5b4fc;
        }
        
        .taskbar-btn img {
            width: 100%;
            height: 100%;
            aspect-ratio: 1/1;
            object-fit: cover;
            border-radius: 50%;
            pointer-events: none;
            display: block;
        }
        
        @media (max-width: 600px) {
            .taskbar {
                gap: 10px;
                padding: 10px 0 8px 0;
            }
            .taskbar-btn {
                width: 38px;
                height: 38px;
            }
        }
    </style>
</head>

<body>
    <!-- Hamburger Music Menu -->
    <div id="musicMenuBtn" style="position:fixed;top:18px;left:18px;z-index:3000;cursor:pointer;width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:rgba(30,30,40,0.85);border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.18);">
        <div style="width:28px;height:22px;display:flex;flex-direction:column;justify-content:space-between;">
            <span style="display:block;height:4px;width:100%;background:#fff;border-radius:2px;"></span>
            <span style="display:block;height:4px;width:100%;background:#fff;border-radius:2px;"></span>
            <span style="display:block;height:4px;width:100%;background:#fff;border-radius:2px;"></span>
        </div>
    </div>
    <div id="musicMenuOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(20,20,30,0.92);z-index:2999;"></div>
    <div id="musicMenuPanel" style="display:none;position:fixed;top:0;left:0;width:100vw;max-width:360px;height:100vh;background:rgba(255,255,255,0.82);backdrop-filter:blur(6px);z-index:3001;box-shadow:4px 0 32px 0 rgba(0,0,0,0.22);overflow-y:auto;padding:28px 8px 18px 8px;">
        <button id="closeMusicMenu" style="position:absolute;top:16px;right:16px;background:rgba(30,30,40,0.12);border:none;border-radius:50%;width:36px;height:36px;font-size:22px;cursor:pointer;">√ó</button>
        <h2 style="margin:0 0 18px 0;font-size:1.3rem;text-align:center;color:#222;font-family:sans-serif;">üéµ Nh·∫°c cho b·∫°n nh·ªè</h2>
        <div id="musicListPanel" style="display:flex;flex-direction:column;gap:14px;align-items:flex-start;padding-bottom:8px;">
            <!-- Danh s√°ch nh·∫°c s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS ƒë·ªÉ g·∫Øn s·ª± ki·ªán play -->
        </div>
    </div>
    <!-- Dynamic Island Music Player -->
    <div id="bigMusicPlayerOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:3500;pointer-events:none;">
        <div id="islandBlurBg" style="position:absolute;top:0;left:0;width:100vw;height:100vh;background:rgba(30,30,40,0.12);backdrop-filter:blur(2.5px);transition:opacity 0.3s;pointer-events:auto;"></div>
        <div id="islandPlayerWrap" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.92);opacity:0;transition:all 0.35s cubic-bezier(.4,1.6,.4,1);display:flex;align-items:center;justify-content:center;min-width:320px;min-height:120px;pointer-events:auto;">
            <div style="position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(30,30,40,0.92);backdrop-filter:blur(8px);padding:18px 18px 22px 18px;border-radius:32px;box-shadow:0 8px 32px 0 rgba(0,0,0,0.22);min-width:320px;max-width:420px;width:100vw;">
                <button id="closeBigPlayer" style="position:absolute;top:8px;right:8px;background:rgba(30,30,40,0.18);border:none;border-radius:50%;width:36px;height:36px;font-size:22px;cursor:pointer;color:#fff;z-index:2;">√ó</button>
                <div style="margin:auto;width:100%;max-width:380px;">
                    <iframe id="bigMusicIframe" style="border-radius:18px;width:100%;min-width:220px;max-width:380px;min-height:80px;height:80px;max-height:120px;border:none;background:rgba(255,255,255,0.97);box-shadow:0 4px 18px 0 rgba(0,0,0,0.18);overflow:hidden;position:relative;"
                        src="" frameBorder="0" allowfullscreen allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                </div>
                <div style="margin-top:12px;display:flex;gap:12px;align-items:center;justify-content:center;">
                    <button id="prevMusicBtn" style="font-size:1.2rem;padding:6px 14px;border-radius:8px;border:none;background:#eee;cursor:pointer;">‚èÆÔ∏è</button>
                    <button id="nextMusicBtn" style="font-size:1.2rem;padding:6px 14px;border-radius:8px;border:none;background:#eee;cursor:pointer;">‚è≠Ô∏è</button>
                    <button id="modeMusicBtn" style="font-size:1rem;padding:6px 10px;border-radius:8px;border:none;background:#e0e0e0;cursor:pointer;">üîÅ Tu·∫ßn t·ª±</button>
                </div>
                <div id="bigPlayerHint" style="margin-top:10px;background:rgba(0,0,0,0.13);color:#fff;padding:4px 12px;border-radius:10px;font-size:0.95rem;z-index:3;white-space:nowrap;">D√πng ‚èÆÔ∏è ‚è≠Ô∏è ho·∫∑c ph√≠m ‚Üê ‚Üí ƒë·ªÉ chuy·ªÉn b√†i.</div>
            </div>
        </div>
    </div>
    <div class="starfield" id="starfield"></div>
    <div class="petal-bg" id="petalBg"></div>

    <div class="container">
        <div class="solar-system" id="solarSystem">
            <div class="sun" onclick="showLocketModal()" tabindex="0" aria-label="M·∫∑t Tr·ªùi" onkeydown="if(event.key==='Enter'||event.key===' '){showLocketModal();}">‚òÄÔ∏è</div>

            <!-- Planet 1 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet1" onclick="showMessage(1)" tabindex="0" aria-label="H√†nh tinh 1" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(1);}">üëë</div>
            </div>

            <!-- Planet 2 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet2" onclick="showMessage(2)" tabindex="0" aria-label="H√†nh tinh 2" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(2);}">üíç</div>
            </div>

            <!-- Planet 3 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet3" onclick="showMessage(3)" tabindex="0" aria-label="H√†nh tinh 3" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(3);}">ü¶ã</div>
            </div>

            <!-- Planet 4 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet4" onclick="showMessage(4)" tabindex="0" aria-label="H√†nh tinh 4" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(4);}">üéÑ</div>
            </div>

            <!-- Planet 5 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet5" onclick="showMessage(5)" tabindex="0" aria-label="H√†nh tinh 5" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(5);}">üçÅ</div>
            </div>

            <!-- Planet 6 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet6" onclick="showMessage(6)" tabindex="0" aria-label="H√†nh tinh 6" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(6);}">üçÄ</div>
            </div>

            <!-- Planet 7 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet7" onclick="showMessage(7)" tabindex="0" aria-label="H√†nh tinh 7" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(7);}">‚òòÔ∏è</div>
            </div>

            <!-- Planet 8 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet8" onclick="showMessage(8)" tabindex="0" aria-label="H√†nh tinh 8" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(8);}">üêö</div>
            </div>

            <!-- Planet 9 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet9" onclick="showMessage(9)" tabindex="0" aria-label="H√†nh tinh 9" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(9);}">üíê</div>
            </div>

            <!-- Planet 10 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet10" onclick="showMessage(10)" tabindex="0" aria-label="H√†nh tinh 10" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(10);}">üå∑</div>
            </div>

            <!-- Planet 11 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet11" onclick="showMessage(11)" tabindex="0" aria-label="H√†nh tinh 11" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(11);}">üåπ</div>
            </div>

            <!-- Planet 12 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet12" onclick="showMessage(12)" tabindex="0" aria-label="H√†nh tinh 12" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(12);}">ü•Ä</div>
            </div>

            <!-- Planet 13 -->
            <div class="orbit">
                <div class="planet" style="top: 0; left: 50%; transform: translate(-50%, -50%);" id="planet13" onclick="showMessage(13)" tabindex="0" aria-label="H√†nh tinh 13" onkeydown="if(event.key==='Enter'||event.key===' '){showMessage(13);}">ü™ª</div>
            </div>
        </div>
    </div>

    <!-- Card-style Modal Interface -->
    <div class="overlay" id="overlay" onclick="closeMessage()"></div>
    <div class="modal" id="modalContainer">
        <button class="close-btn" onclick="closeMessage()">√ó</button>

        <div class="modal-header">
            <img src="images/nhat.jpg" alt="Avatar" class="modal-avatar" id="messageAvatar">
            <h2 class="modal-title" id="messageName">Minh Nh·∫≠t</h2>
        </div>

        <div class="modal-content">
            <img src="images/goodmorningebe.jpg" alt="M·∫∑t Tr·ªùi Trung T√¢m" class="modal-image" id="messageImage" loading="lazy">

            <div class="modal-messages" id="modalMessages">
                <!-- Messages will be populated here -->
            </div>

            <div class="admin-panel" id="adminPanel" style="display: none;">
                <h3>üìù Admin: Ch·ªânh s·ª≠a Messages</h3>
                <div id="messageEditor">
                    <!-- Message editor will be populated here -->
                </div>
                <button onclick="addMessage()" class="admin-btn">+ Th√™m Message</button>
                <button onclick="saveMessages()" class="admin-btn save-btn">üíæ L∆∞u T·∫•t C·∫£</button>
            </div>
        </div>

        <button class="admin-toggle" id="adminToggle" onclick="toggleAdmin()" style="display: none;">üëë</button>
    </div>

    <!-- Taskbar -->
    <div class="taskbar" id="taskbar">
        <button class="taskbar-btn" data-link="https://minhnhatuet.github.io/hpbdHaMy/" aria-label="Memory 1">
            <img src="images/memories/1.jpg" alt="Memory 1">
        </button>
        <button class="taskbar-btn" data-link="https://open.spotify.com/playlist/1Ek7SqWjQzwmpgnGyxtHoy?si=7afc1fe244ff407b&pt=2f38dfee3577fabc1d4f3c8b2d1d0e30" aria-label="Memory 2">
            <img src="images/memories/3.jpg" alt="Memory 2">
        </button>
        <button class="taskbar-btn" data-link="https://minhnhatuet.github.io/loveHaMy/" aria-label="Memory 3">
            <img src="images/memories/7.jpg" alt="Memory 3">
        </button>
        <button class="taskbar-btn" data-link="https://open.spotify.com/playlist/7lh0YuIuCMbUnn6bw5WqJt?si=1498d46701994ede&pt=87ac1be49c38f3992d0d32e574072358" aria-label="Memory 4">
            <img src="images/memories/2.jpg" alt="Memory 4">
        </button>
        <button class="taskbar-btn" data-link="https://minhnhatuet.github.io/NewyearforHM/" aria-label="Memory 5">
            <img src="images/memories/5.jpg" alt="Memory 5">
        </button>
        <button class="taskbar-btn" data-link="https://minhnhatuet.github.io/QuachoHaMy/" aria-label="Memory 6">
            <img src="images/memories/6.jpg" alt="Memory 6">
        </button>
        <button class="taskbar-btn" data-link="https://minhnhatuet.github.io/QuachoHM/" aria-label="Memory 7">
            <img src="images/memories/4.jpg" alt="Memory 7">
        </button>
    </div>

    <!-- Locket Modal for Sun -->
    <div class="overlay" id="locketOverlay" style="display:none;"></div>
    <div class="modal" id="locketModal" style="display:none;max-width:260px;width:90vw;padding:0;background:transparent;box-shadow:none;">
        <div class="locket-widget" style="margin:auto;width:220px;height:220px;background:#000;border-radius:20px;padding:4px;box-shadow:0 4px 12px rgba(0,0,0,0.15);display:flex;align-items:center;justify-content:center;">
            <div class="photo-display" style="width:200px;height:200px;position:relative;border-radius:16px;overflow:hidden;">
                <img id="locketPhoto" style="width:100%;height:100%;object-fit:cover;aspect-ratio:1/1;display:block;" class="photo-fade" alt="Locket Photo">
                <div class="time-overlay" id="photoTime" style="position:absolute;top:8px;left:8px;background:rgba(0,0,0,0.5);color:white;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500;">2m</div>
            </div>
        </div>
    </div>


    <!-- No external script files -->
    <script src="js/timeBasedImages.js"></script>
    <script>
        // Music Player logic
        document.addEventListener('DOMContentLoaded', function() {
            // Danh s√°ch nh·∫°c (Spotify embed src)
            const musicList = [{
                src: "https://open.spotify.com/embed/album/7kT4Uja9jEoToBrOwP16LD?utm_source=generator",
                title: "Album: 7kT4Uja9jEoToBrOwP16LD"
            }, {
                src: "https://open.spotify.com/embed/track/4XfGJcOuna8p7g8Nku9bQq?utm_source=generator",
                title: "Track: 4XfGJcOuna8p7g8Nku9bQq"
            }, {
                src: "https://open.spotify.com/embed/track/5KYv3kORBKUmVEoqbRRWxt?utm_source=generator",
                title: "Track: 5KYv3kORBKUmVEoqbRRWxt"
            }, {
                src: "https://open.spotify.com/embed/track/7zJ6yuuOnjjRqbKv1zfCAl?utm_source=generator",
                title: "Track: 7zJ6yuuOnjjRqbKv1zfCAl"
            }, {
                src: "https://open.spotify.com/embed/track/5wYQC7AuxV8ROALWcbVNxc?utm_source=generator",
                title: "Track: 5wYQC7AuxV8ROALWcbVNxc"
            }, {
                src: "https://open.spotify.com/embed/track/3b34161QoxLwsqhWSPy9i5?utm_source=generator",
                title: "Track: 3b34161QoxLwsqhWSPy9i5"
            }, {
                src: "https://open.spotify.com/embed/track/7fCeYpR02Q8JVuD88hJZVT?utm_source=generator",
                title: "Track: 7fCeYpR02Q8JVuD88hJZVT"
            }, {
                src: "https://open.spotify.com/embed/track/0yCWGVeHcbaP3yiicXvgK3?utm_source=generator",
                title: "Track: 0yCWGVeHcbaP3yiicXvgK3"
            }, {
                src: "https://open.spotify.com/embed/track/1DVYafsLmcQySKkJnY4RCs?utm_source=generator",
                title: "Track: 1DVYafsLmcQySKkJnY4RCs"
            }, {
                src: "https://open.spotify.com/embed/track/3H6nzsPNMttEvUl3ai3xN8?utm_source=generator",
                title: "Track: 3H6nzsPNMttEvUl3ai3xN8"
            }, {
                src: "https://open.spotify.com/embed/track/5LQpQ6SDeaz6SIkR0lvsoC?utm_source=generator",
                title: "Track: 5LQpQ6SDeaz6SIkR0lvsoC"
            }];
            let currentMusicIndex = 0;
            let playMode = 'sequential'; // or 'random'
            // Render danh s√°ch nh·∫°c nh·ªè
            const musicListPanel = document.getElementById('musicListPanel');
            musicListPanel.innerHTML = '';
            musicList.forEach((item, idx) => {
                const wrap = document.createElement('div');
                wrap.style.width = '100%';
                wrap.style.cursor = 'pointer';
                wrap.style.position = 'relative';
                wrap.style.transition = 'box-shadow 0.2s';
                wrap.setAttribute('data-idx', idx);
                wrap.title = 'B·∫•m ƒë·ªÉ ph√°t l·ªõn';
                wrap.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showBigPlayer(idx);
                });
                const iframe = document.createElement('iframe');
                iframe.style.borderRadius = '12px';
                iframe.style.minWidth = '220px';
                iframe.style.width = '100%';
                iframe.style.maxWidth = '340px';
                iframe.style.minHeight = '80px';
                iframe.style.height = '80px';
                iframe.style.maxHeight = '80px';
                iframe.style.border = 'none';
                iframe.style.background = 'rgba(255,255,255,0.85)';
                iframe.style.boxShadow = '0 4px 18px 0 rgba(0,0,0,0.18)';
                iframe.style.overflow = 'hidden';
                iframe.style.position = 'relative';
                iframe.src = item.src;
                iframe.setAttribute('frameBorder', '0');
                iframe.setAttribute('allowfullscreen', '');
                iframe.setAttribute('allow', 'autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture');
                iframe.setAttribute('loading', 'lazy');
                wrap.appendChild(iframe);
                musicListPanel.appendChild(wrap);
            });
            // Big player logic
            const bigOverlay = document.getElementById('bigMusicPlayerOverlay');
            const bigIframe = document.getElementById('bigMusicIframe');
            const closeBigBtn = document.getElementById('closeBigPlayer');
            const nextBtn = document.getElementById('nextMusicBtn');
            const prevBtn = document.getElementById('prevMusicBtn');
            const modeBtn = document.getElementById('modeMusicBtn');

            function showBigPlayer(idx) {
                currentMusicIndex = idx;
                bigIframe.src = musicList[idx].src;
                bigOverlay.style.display = 'block';
                // Hi·ªáu ·ª©ng dynamic island
                setTimeout(function() {
                    document.getElementById('islandPlayerWrap').style.transform = 'translate(-50%,-50%) scale(1)';
                    document.getElementById('islandPlayerWrap').style.opacity = '1';
                }, 10);
                updateModeBtn();
            }

            function closeBigPlayer() {
                document.getElementById('islandPlayerWrap').style.transform = 'translate(-50%,-50%) scale(0.92)';
                document.getElementById('islandPlayerWrap').style.opacity = '0';
                setTimeout(function() {
                    bigOverlay.style.display = 'none';
                    bigIframe.src = '';
                }, 300);
            }

            function playNext() {
                if (playMode === 'random') {
                    let nextIdx;
                    do {
                        nextIdx = Math.floor(Math.random() * musicList.length);
                    } while (nextIdx === currentMusicIndex && musicList.length > 1);
                    currentMusicIndex = nextIdx;
                } else {
                    currentMusicIndex = (currentMusicIndex + 1) % musicList.length;
                }
                showBigPlayer(currentMusicIndex);
            }

            function playPrev() {
                if (playMode === 'random') {
                    let prevIdx;
                    do {
                        prevIdx = Math.floor(Math.random() * musicList.length);
                    } while (prevIdx === currentMusicIndex && musicList.length > 1);
                    currentMusicIndex = prevIdx;
                } else {
                    currentMusicIndex = (currentMusicIndex - 1 + musicList.length) % musicList.length;
                }
                showBigPlayer(currentMusicIndex);
            }

            function toggleMode() {
                playMode = playMode === 'sequential' ? 'random' : 'sequential';
                updateModeBtn();
            }

            function updateModeBtn() {
                modeBtn.textContent = playMode === 'sequential' ? 'üîÅ Tu·∫ßn t·ª±' : 'üîÄ Ng·∫´u nhi√™n';
            }
            closeBigBtn.onclick = closeBigPlayer;
            nextBtn.onclick = playNext;
            prevBtn.onclick = playPrev;
            modeBtn.onclick = toggleMode;
            // ƒê√≥ng khi b·∫•m ngo√†i overlay
            bigOverlay.onclick = function(e) {
                if (e.target === bigOverlay) closeBigPlayer();
            };
            // Keyboard: Esc ƒë·ªÉ ƒë√≥ng, Space/Right ƒë·ªÉ next, Left ƒë·ªÉ prev
            document.addEventListener('keydown', function(e) {
                if (bigOverlay.style.display === 'flex') {
                    if (e.key === 'Escape') closeBigPlayer();
                    if (e.key === 'ArrowRight') playNext();
                    if (e.key === 'ArrowLeft') playPrev();
                }
            });
            // T·ª± ƒë·ªông ph√°t ti·∫øp khi user nh·∫•n next tr√™n Spotify (kh√¥ng c√≥ API end, n√™n h∆∞·ªõng d·∫´n user d√πng n√∫t next c·ªßa overlay)
            // C√≥ th·ªÉ th√™m h∆∞·ªõng d·∫´n nh·ªè:
            const hint = document.createElement('div');
            hint.style.position = 'absolute';
            hint.style.bottom = '32px';
            hint.style.left = '50%';
            hint.style.transform = 'translateX(-50%)';
            hint.style.background = 'rgba(0,0,0,0.18)';
            hint.style.color = '#fff';
            hint.style.padding = '6px 18px';
            hint.style.borderRadius = '12px';
            hint.style.fontSize = '1rem';
            hint.style.zIndex = '3';
            hint.textContent = 'D√πng ‚èÆÔ∏è ‚è≠Ô∏è ho·∫∑c ph√≠m ‚Üê ‚Üí ƒë·ªÉ chuy·ªÉn b√†i. Kh√¥ng th·ªÉ t·ª± ƒë·ªông ph√°t h·∫øt b√†i do gi·ªõi h·∫°n Spotify.';
            bigOverlay.appendChild(hint);
        });
    </script>
    <script>
        // Music menu hamburger logic
        document.addEventListener('DOMContentLoaded', function() {
            const btn = document.getElementById('musicMenuBtn');
            const panel = document.getElementById('musicMenuPanel');
            const overlay = document.getElementById('musicMenuOverlay');
            const closeBtn = document.getElementById('closeMusicMenu');

            function openMenu() {
                panel.style.display = 'block';
                overlay.style.display = 'block';
            }

            function closeMenu() {
                panel.style.display = 'none';
                overlay.style.display = 'none';
            }
            btn.onclick = openMenu;
            closeBtn.onclick = closeMenu;
            overlay.onclick = closeMenu;
            // ƒê√≥ng b·∫±ng ph√≠m Esc
            document.addEventListener('keydown', function(e) {
                if (panel.style.display === 'block' && (e.key === 'Escape' || e.key === 'Esc')) closeMenu();
            });
        });
    </script>
    <script>
        // Locket data for Sun: d√πng ·∫£nh th·∫≠t t·ª´ images/memories
        const locketTimes = [
            'Bug', 'b·∫°n nh·ªè', 'em b√©', '7/8/2022', '2/9/2022', '17/10/2024',
            '16/11/2024', '22/12/2024', '24/12/2024', '8/3/2025', 'ebe'

        ];
        const locketPhotos = [
            // 20 ·∫£nh
            ...Array.from({
                length: 20
            }, (_, i) => ({
                src: `images/memories/${i + 1}.jpg`,
                type: 'image'
            })),
            // 2 video
            {
                src: "images/memories/1.mp4",
                type: "video"
            }, {
                src: "images/memories/2.mp4",
                type: "video"
            }
        ];



        let currentPhotoIndex = Math.floor(Math.random() * locketPhotos.length);

        function showNextPhoto() {
            const img = document.getElementById('locketPhoto');
            const timeEl = document.getElementById('photoTime');
            if (!img) return;
            img.style.opacity = '0';
            setTimeout(() => {
                currentPhotoIndex = Math.floor(Math.random() * locketPhotos.length);
                const timeIndex = Math.floor(Math.random() * locketTimes.length);
                const photo = locketPhotos[currentPhotoIndex];
                // X√≥a video c≈© n·∫øu c√≥
                const oldVideo = document.getElementById('locketVideo');
                if (oldVideo) oldVideo.remove();
                if (photo.type === 'video') {
                    img.style.display = 'none';
                    // T·∫°o video element
                    const video = document.createElement('video');
                    video.id = 'locketVideo';
                    video.src = photo.src;
                    video.style.width = '100%';
                    video.style.height = '100%';
                    video.style.objectFit = 'cover';
                    video.style.borderRadius = '16px';
                    video.autoplay = true;
                    video.loop = true;
                    video.muted = true; // B·∫Øt bu·ªôc muted ƒë·ªÉ autoplay
                    video.playsInline = true;
                    // Khi click v√†o video th√¨ b·∫≠t ti·∫øng
                    video.addEventListener('click', function() {
                        video.muted = false;
                        video.volume = 1;
                        video.play();
                    });
                    img.parentNode.insertBefore(video, img);
                } else {
                    img.style.display = 'block';
                    img.src = photo.src;
                    // X√≥a video n·∫øu c√≥
                    const oldVideo = document.getElementById('locketVideo');
                    if (oldVideo) oldVideo.remove();
                }
                timeEl.textContent = locketTimes[timeIndex];
                img.style.opacity = '1';
            }, 400);
        }

        function showLocketModal() {
            // Hide main modal if open
            document.getElementById('modalContainer').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
            // Show locket modal
            document.getElementById('locketOverlay').style.display = 'block';
            document.getElementById('locketModal').style.display = 'block';
            showNextPhoto();
            if (!window._locketInterval) {
                window._locketInterval = setInterval(showNextPhoto, 4000);
            }
        }

        function closeLocketModal() {
            document.getElementById('locketOverlay').style.display = 'none';
            document.getElementById('locketModal').style.display = 'none';
            if (window._locketInterval) {
                clearInterval(window._locketInterval);
                window._locketInterval = null;
            }
        }
        // Click overlay to close
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('locketOverlay').onclick = closeLocketModal;
            document.getElementById('locketModal').onclick = function(e) {
                e.stopPropagation();
            };
            const locketWidget = document.getElementById('locketModal').querySelector('.locket-widget');
            locketWidget.onclick = function(e) {
                e.stopPropagation();
                showNextPhoto();
            };
            // D·ª´ng chuy·ªÉn ·∫£nh khi gi·ªØ chu·ªôt, ti·∫øp t·ª•c khi th·∫£ chu·ªôt ho·∫∑c r·ªùi kh·ªèi ·∫£nh
            locketWidget.addEventListener('mousedown', function(e) {
                if (window._locketInterval) {
                    clearInterval(window._locketInterval);
                    window._locketInterval = null;
                }
            });
            locketWidget.addEventListener('mouseup', function(e) {
                if (!window._locketInterval) {
                    window._locketInterval = setInterval(showNextPhoto, 4000);
                }
            });
            locketWidget.addEventListener('mouseleave', function(e) {
                if (!window._locketInterval) {
                    window._locketInterval = setInterval(showNextPhoto, 4000);
                }
            });
        });
        window.showLocketModal = showLocketModal;
        window.closeLocketModal = closeLocketModal;
        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
                console.log('üöÄ DOM loaded, initializing Solar System...');

                // All available icons (expanded with more emojis)
                const allIcons = [
                    'üëë', 'üíç', 'ü¶ã', 'üéÑ', 'üçÅ', 'üçÄ', '‚òòÔ∏è', 'üêö', 'üíê', 'üå∑', 'üåπ', 'ü•Ä', 'ü™ª', 'ü™∑', 'üå∫', 'üå∏', 'üåº',
                    'ü™ê', 'üåè', '‚ùÑÔ∏è', 'üçì', 'ü•®', 'üå∞', '‚öΩÔ∏è', 'üíå', '‚ù§Ô∏è‚Äçüî•', 'ü©µ', 'üíó', 'üíù', 'üåü', '‚ú®', 'üí´', '‚≠ê',
                    'üåô', 'üåû', 'üåà', 'üî•', 'üíé', 'üéÄ', 'üéà', 'üéä', 'üéâ', 'üéÅ', 'üéØ', 'üé®', 'üé™', 'üé≠', 'üé™', 'üé°',
                    'üç≠', 'üç¨', 'üçØ', 'üçé', 'üçä', 'üçã', 'üçå', 'üçâ', 'üçá', 'üçë', 'üçí', 'ü•ù', 'ü•≠', 'üçç', 'ü••', 'ü•ë',
                    'üåª', 'üå≥', 'üå≤', 'üå±', 'üçÉ', 'üåø', 'üéã', 'üåæ', 'üíÆ', 'üèµÔ∏è', 'üå¥', 'üåµ', 'üåº', 'üåô', '‚ö°', 'üåä'
                ];
                let usedIcons = new Set();
                let planetRotationIntervals = {};

                function getRandomIcon() {
                    return allIcons[Math.floor(Math.random() * allIcons.length)];
                }

                function rotateSinglePlanet(planetId) {
                    const planet = document.getElementById(`planet${planetId}`);
                    if (planet) {
                        console.log(`Rotating planet ${planetId}`);
                        // Add fade out effect
                        planet.style.opacity = '0.3';
                        planet.style.transform = 'translate(-50%, -50%) scale(0.8)';

                        setTimeout(() => {
                            // Change icon
                            const newIcon = getRandomIcon();
                            planet.textContent = newIcon;
                            console.log(`Planet ${planetId} changed to: ${newIcon}`);

                            // Fade back in
                            planet.style.opacity = '1';
                            planet.style.transform = 'translate(-50%, -50%) scale(1)';
                        }, 200);
                    } else {
                        console.error(`Planet ${planetId} not found!`);
                    }
                }

                function rotatePlanetIcons() {
                    for (let i = 1; i <= 13; i++) {
                        const planet = document.getElementById(`planet${i}`);
                        if (planet) {
                            planet.textContent = getRandomIcon();
                        }
                    }
                }

                function startContinuousRotation() {
                    console.log('Starting continuous rotation for 13 planets...');
                    // Start rotation for each planet with different intervals (slower)
                    for (let i = 1; i <= 13; i++) {
                        // Each planet changes every 8-15 seconds (much slower)
                        const interval = 8000 + (i * 500) + (Math.random() * 7000);

                        console.log(`Planet ${i}: interval = ${interval}ms`);

                        planetRotationIntervals[i] = setInterval(() => {
                            rotateSinglePlanet(i);
                        }, interval);

                        // Initial delay for each planet (longer delay)
                        setTimeout(() => {
                            rotateSinglePlanet(i);
                        }, Math.random() * 5000);
                    }
                    console.log('All 13 planets rotation started!');
                }

                function stopContinuousRotation() {
                    Object.values(planetRotationIntervals).forEach(interval => {
                        clearInterval(interval);
                    });
                    planetRotationIntervals = {};
                }

                // Global variables for admin
                let currentPlanetId = null;
                let isAdminMode = false;

                // Time-based image system
                // (moved to js/timeBasedImages.js)

                // Helper to get current time slot and message
                function getCurrentTimeSlot() {
                    const now = new Date();
                    const currentHour = now.getHours() + now.getMinutes() / 60;

                    for (const [key, slot] of Object.entries(timeBasedImages)) {
                        if (key === 'sleep') {
                            if (currentHour >= 21 || currentHour < 4) {
                                return slot;
                            }
                        } else {
                            if (currentHour >= slot.start && currentHour < slot.end) {
                                return slot;
                            }
                        }
                    }
                    return timeBasedImages.together;
                }

                // Helper to get the first message object for the current time slot
                function getCurrentTimeSlotMessage() {
                    const slot = getCurrentTimeSlot();
                    if (slot && slot.messages && slot.messages.length > 0) {
                        return slot.messages[0];
                    }
                    return {
                        text: '',
                        image: slot && slot.images ? slot.images[0] : ''
                    };
                }

                // Message functions
                function showMessage(planetId) {
                    console.log('ü™ê showMessage called with planetId:', planetId);
                    try {
                        currentPlanetId = planetId;
                        // L·∫•y slot theo gi·ªù hi·ªán t·∫°i
                        const slot = getCurrentTimeSlot();
                        // Ch·ªçn message ng·∫´u nhi√™n trong slot
                        let messageObj = null;
                        if (slot && slot.messages && slot.messages.length > 0) {
                            const randomIndex = Math.floor(Math.random() * slot.messages.length);
                            const msg = slot.messages[randomIndex];
                            // N·∫øu text ho·∫∑c image l√† m·∫£ng, ch·ªçn ng·∫´u nhi√™n
                            const text = Array.isArray(msg.text) ? msg.text[Math.floor(Math.random() * msg.text.length)] : msg.text;
                            const image = Array.isArray(msg.image) ? msg.image[Math.floor(Math.random() * msg.image.length)] : msg.image;
                            messageObj = {
                                text,
                                image
                            };
                        } else {
                            messageObj = {
                                text: '',
                                image: ''
                            };
                        }
                        // Hi·ªÉn th·ªã modal/card
                        const modal = document.getElementById('modalContainer');
                        const overlay = document.getElementById('overlay');
                        const avatarImg = document.getElementById('messageAvatar');
                        if (avatarImg) {
                            avatarImg.src = "images/nhat.jpg";
                            avatarImg.alt = "Avatar";
                        }
                        const titleElement = document.getElementById('messageName');
                        if (titleElement) {
                            titleElement.textContent = "Minh Nh·∫≠t";
                        }
                        const messageImage = document.getElementById('messageImage');
                        if (messageImage) {
                            messageImage.src = messageObj.image || '';
                            messageImage.alt = messageObj.text || 'Message Image';
                            messageImage.style.display = 'block';
                        }
                        // Hi·ªÉn th·ªã message
                        displayMessages([messageObj]);
                        // Update admin panel n·∫øu ƒëang ·ªü admin mode (hi·ªán messages c·ªßa slot hi·ªán t·∫°i)
                        if (isAdminMode) {
                            updateAdminPanel(slot.messages);
                        }
                        if (overlay && modal) {
                            overlay.classList.add('active');
                            modal.classList.add('active');
                        }
                    } catch (error) {
                        console.error('üí• Error in showMessage:', error);
                    }
                }

                function showSunMessage() {
                    currentPlanetId = 'sun';
                    // L·∫•y slot theo gi·ªù hi·ªán t·∫°i
                    const slot = getCurrentTimeSlot();
                    // Ch·ªçn message ng·∫´u nhi√™n trong slot
                    let messageObj = null;
                    if (slot && slot.messages && slot.messages.length > 0) {
                        const randomIndex = Math.floor(Math.random() * slot.messages.length);
                        const msg = slot.messages[randomIndex];
                        const text = Array.isArray(msg.text) ? msg.text[Math.floor(Math.random() * msg.text.length)] : msg.text;
                        const image = Array.isArray(msg.image) ? msg.image[Math.floor(Math.random() * msg.image.length)] : msg.image;
                        messageObj = {
                            text,
                            image
                        };
                    } else {
                        messageObj = {
                            text: '',
                            image: ''
                        };
                    }
                    const avatarImg = document.getElementById('messageAvatar');
                    avatarImg.src = "images/nhat.jpg";
                    avatarImg.alt = "Avatar";
                    document.getElementById('messageName').textContent = "Minh Nh·∫≠t";
                    const messageImage = document.getElementById('messageImage');
                    messageImage.src = messageObj.image || '';
                    messageImage.alt = messageObj.text || 'Message Image';
                    displayMessages([messageObj]);
                    if (isAdminMode) {
                        updateAdminPanel(slot.messages);
                    }
                    // Th√™m class sun-modal cho modal
                    const modal = document.getElementById('modalContainer');
                    if (modal) modal.classList.add('sun-modal');
                    document.getElementById('overlay').classList.add('active');
                    modal.classList.add('active');
                }

                function displayMessages(messages) {
                    const messagesContainer = document.getElementById('modalMessages');
                    messagesContainer.innerHTML = '';
                    if (messages && messages.length > 0) {
                        const messageElement = document.createElement('p');
                        messageElement.className = 'modal-message';
                        messageElement.textContent = messages[0].text || messages[0];
                        messagesContainer.appendChild(messageElement);
                    }
                }

                function updateAdminPanel(messages) {
                    const editor = document.getElementById('messageEditor');
                    editor.innerHTML = '';
                    messages.forEach((message, index) => {
                        const editorItem = document.createElement('div');
                        editorItem.className = 'message-editor-item';
                        editorItem.innerHTML = `
                    <textarea rows="3" data-index="${index}">${message.text || message}</textarea>
                    <input type="text" placeholder="Image URL (t√πy ch·ªçn)" value="${message.image || ''}" data-img-index="${index}" style="width: 40%; font-size: 12px; margin-left: 8px;" />
                    <button class="btn-remove" onclick="removeMessage(${index})">üóëÔ∏è</button>
                `;
                        editor.appendChild(editorItem);
                    });
                }

                function addMessage() {
                    if (!currentPlanetId) return;
                    const data = currentPlanetId === 'sun' ? sunData : planetMessages[currentPlanetId];
                    if (data) {
                        data.messages.push({
                            text: "Th√™m message m·ªõi ·ªü ƒë√¢y...",
                            image: ""
                        });
                        updateAdminPanel(data.messages);
                        displayMessages(data.messages);
                    }
                }

                function saveMessages() {
                    if (!currentPlanetId) return;
                    const data = currentPlanetId === 'sun' ? sunData : planetMessages[currentPlanetId];
                    if (data) {
                        const textareas = document.querySelectorAll('#messageEditor textarea');
                        const imageInputs = document.querySelectorAll('#messageEditor input[type="text"]');
                        data.messages = Array.from(textareas).map((textarea, i) => {
                            const text = textarea.value.trim();
                            const image = imageInputs[i].value.trim();
                            return {
                                text,
                                image
                            };
                        });
                    }
                }

                function removeMessage(index) {
                    if (!currentPlanetId) return;
                    let data;
                    if (currentPlanetId === 'sun') {
                        data = sunData;
                    } else if (planetMessages[currentPlanetId]) {
                        data = planetMessages[currentPlanetId];
                    } else {
                        // N·∫øu mu·ªën x√≥a message theo khung gi·ªù th·ª±c (v√≠ d·ª• cho modal theo gi·ªù)
                        data = getCurrentTimeSlot();
                    }
                    if (data && data.messages && data.messages.length > index) {
                        data.messages.splice(index, 1);
                        updateAdminPanel(data.messages);
                        displayMessages(data.messages);
                    }
                }

                // Expose functions to global scope for HTML onclick
                window.closeMessage = function() {
                    const overlay = document.getElementById('overlay');
                    const modal = document.getElementById('modalContainer');
                    if (overlay && modal) {
                        overlay.classList.remove('active');
                        modal.classList.remove('active');
                        modal.classList.remove('sun-modal');
                    }
                };
                window.addMessage = addMessage;
                window.saveMessages = saveMessages;
                window.removeMessage = removeMessage;

                // Show admin toggle with keyboard shortcut
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'a' && e.ctrlKey && document.getElementById('modalContainer').classList.contains('active')) {
                        e.preventDefault();
                        document.getElementById('adminToggle').style.display = 'block';
                        console.log('üîë Admin toggle shown (Ctrl+A)');
                    }
                });

                // Create starfield
                // Create starfield (n√¢ng c·∫•p)
                function createStarfield() {
                    const starfield = document.getElementById('starfield');
                    const starTypes = [{
                        cls: 'star-big',
                        count: 40
                    }, {
                        cls: 'star-medium',
                        count: 80
                    }, {
                        cls: 'star-small',
                        count: 120
                    }];
                    const colorClasses = ['star-yellow', 'star-blue', 'star-pink', ''];
                    for (const type of starTypes) {
                        for (let i = 0; i < type.count; i++) {
                            const star = document.createElement('div');
                            let extra = '';
                            if (Math.random() < 0.25) extra = 'star-move';
                            const color = colorClasses[Math.floor(Math.random() * colorClasses.length)];
                            star.className = `star ${type.cls} ${color} ${extra}`;
                            star.style.left = Math.random() * 100 + '%';
                            star.style.top = Math.random() * 100 + '%';
                            star.style.animationDelay = (Math.random() * 3) + 's';
                            starfield.appendChild(star);
                        }
                    }
                }

                // Create floating petals (n√¢ng c·∫•p)
                function createPetal() {
                    const petal = document.createElement('div');
                    const petalTypes = ['petal-1', 'petal-2', 'petal-3', 'petal-4', 'petal-5'];
                    const colorTypes = ['petal-pink', 'petal-yellow', 'petal-blue', ''];
                    const randomType = petalTypes[Math.floor(Math.random() * petalTypes.length)];
                    const color = colorTypes[Math.floor(Math.random() * colorTypes.length)];
                    const rotate = Math.random() < 0.5 ? 'petal-rotate' : '';
                    petal.className = `floating-petal ${randomType} ${color} ${rotate}`;
                    petal.style.left = Math.random() * 100 + '%';
                    petal.style.animationDelay = Math.random() * 10 + 's';
                    petal.style.animationDuration = (Math.random() * 10 + 12) + 's';
                    document.getElementById('petalBg').appendChild(petal);
                    setTimeout(() => {
                        if (petal.parentNode) petal.remove();
                    }, 30000);
                }

                // Initialize effects n√¢ng c·∫•p
                console.log('Initializing starfield and petals...');
                createStarfield();
                for (let i = 0; i < 80; i++) {
                    setTimeout(createPetal, Math.random() * 12000);
                }
                setInterval(createPetal, 500);

                // Initialize planet icons and start rotation
                console.log('Initializing planet icons...');
                rotatePlanetIcons();

                // Start continuous rotation with different intervals for each planet
                console.log('Starting continuous planet icon rotation...');
                startContinuousRotation();

                // Also keep a global rotation as backup (much slower)
                setInterval(rotatePlanetIcons, 30000); // Full rotation every 30 seconds instead of 8

                console.log('Initialization complete. Planet click handlers should be working.');

                // Test that showMessage function is available
                window.testPlanetClick = function(id) {
                    console.log('Testing planet click for ID:', id);
                    showMessage(id);
                };

                console.log('Test function available: window.testPlanetClick(1)');

                // Test function ƒë·ªÉ ki·ªÉm tra time slot hi·ªán t·∫°i
                function checkCurrentTimeSlot() {
                    const now = new Date();
                    const currentHour = now.getHours() + now.getMinutes() / 60;
                    const currentSlot = getCurrentTimeSlot();

                    console.log(`üïê Current time: ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')} (${currentHour.toFixed(2)})`);
                    console.log(`üìÖ Current slot: ${currentSlot.name}`);
                    console.log(`üñºÔ∏è Available images:`, currentSlot.images);

                    return currentSlot;
                }

                // Test function ƒë·ªÉ th·ª≠ c√°c khung gi·ªù kh√°c nhau
                function testTimeSlot(hour, minute = 0) {
                    const testTime = hour + minute / 60;
                    console.log(`üß™ Testing time: ${hour}:${minute.toString().padStart(2, '0')}`);

                    for (const [key, slot] of Object.entries(timeBasedImages)) {
                        if (key === 'sleep') {
                            if (testTime >= 21 || testTime < 4) {
                                console.log(`‚úÖ Match: ${slot.name}`);
                                return slot;
                            }
                        } else {
                            if (testTime >= slot.start && testTime < slot.end) {
                                console.log(`‚úÖ Match: ${slot.name}`);
                                return slot;
                            }
                        }
                    }

                    console.log(`‚ö†Ô∏è No match found, using default: ${timeBasedImages.together.name}`);
                    return timeBasedImages.together;
                }

                // Test modal function
                function testModal() {
                    console.log('üß™ Testing modal display...');
                    const overlay = document.getElementById('overlay');
                    const modal = document.getElementById('modalContainer');

                    console.log('Overlay found:', !!overlay);
                    console.log('Modal found:', !!modal);

                    if (overlay && modal) {
                        // Set some test content
                        document.getElementById('messageName').textContent = "Test Modal";
                        document.getElementById('messageAvatar').src = "images/nhat.jpg";

                        // Add content to messages
                        const messagesContainer = document.getElementById('modalMessages');
                        messagesContainer.innerHTML = '<p class="modal-message">Test message ƒë·ªÉ ki·ªÉm tra modal</p>';

                        overlay.classList.add('active');
                        modal.classList.add('active');
                        console.log('‚úÖ Modal should be visible now');
                        console.log('Modal computed display:', window.getComputedStyle(modal).display);
                    } else {
                        console.error('‚ùå Modal elements not found');
                    }
                }

                // Force show modal function
                function forceShowModal() {
                    const modal = document.getElementById('modalContainer');
                    const overlay = document.getElementById('overlay');
                    if (modal && overlay) {
                        modal.style.display = 'block';
                        overlay.style.display = 'block';
                        console.log('üîß Force showing modal with inline styles');
                    }
                }

                // Expose test functions to window
                window.testPlanetClick = testPlanetClick;
                window.testModal = testModal;
                window.forceShowModal = forceShowModal;
                window.showMessage = showMessage;
                window.checkCurrentTimeSlot = checkCurrentTimeSlot;
                window.testTimeSlot = testTimeSlot;

                // Log khi script ƒë∆∞·ª£c load
                console.log('‚úÖ Solar System initialized successfully!');

                // Show time-based message in modal if no planet is selected
                function showTimeBasedModal() {
                    const slot = getCurrentTimeSlot();
                    let messageObj = null;
                    // L·∫•y message ƒë·∫ßu ti√™n h·ª£p l·ªá
                    if (slot && slot.messages && slot.messages.length > 0) {
                        if (Array.isArray(slot.messages[0].text)) {
                            messageObj = {
                                text: slot.messages[0].text[0],
                                image: Array.isArray(slot.messages[0].image) ? slot.messages[0].image[0] : slot.messages[0].image
                            };
                        } else {
                            messageObj = slot.messages[0];
                        }
                    } else {
                        messageObj = {
                            text: '',
                            image: ''
                        };
                    }
                    // Hi·ªÉn th·ªã modal
                    const modal = document.getElementById('modalContainer');
                    const overlay = document.getElementById('overlay');
                    const avatarImg = document.getElementById('messageAvatar');
                    const titleElement = document.getElementById('messageName');
                    const messageImage = document.getElementById('messageImage');
                    const messagesContainer = document.getElementById('modalMessages');
                    if (avatarImg) {
                        avatarImg.src = "images/nhat.jpg";
                        avatarImg.alt = "Avatar";
                    }
                    if (titleElement) {
                        titleElement.textContent = slot.name || "Minh Nh·∫≠t";
                    }
                    if (messageImage) {
                        messageImage.src = messageObj.image || '';
                        messageImage.alt = messageObj.text || 'Message Image';
                        messageImage.style.display = 'block';
                    }
                    messagesContainer.innerHTML = '';
                    if (messageObj.text) {
                        const messageElement = document.createElement('p');
                        messageElement.className = 'modal-message';
                        messageElement.textContent = messageObj.text;
                        messagesContainer.appendChild(messageElement);
                    }
                    if (overlay && modal) {
                        overlay.classList.add('active');
                        modal.classList.add('active');
                    }
                }

                // K·∫øt th√∫c script: kh√¥ng khai b√°o l·∫°i timeBasedImages ·ªü ƒë√¢y v√¨ ƒë√£ import t·ª´ js/timeBasedImages.js
            } // <-- Add this closing brace to end DOMContentLoaded function
        ); // <-- This closes the DOMContentLoaded event listener

        // Taskbar button click handler
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.taskbar-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const link = this.getAttribute('data-link');
                    if (link) window.open(link, '_blank');
                });
            });
        });
    </script>
    <script>
        // Taskbar: ƒë·ªïi ·∫£nh random v√† ho√°n ƒë·ªïi v·ªã tr√≠ 7 n√∫t li√™n t·ª•c
        document.addEventListener('DOMContentLoaded', function() {
            // Danh s√°ch t·∫•t c·∫£ ·∫£nh memories (1-18.jpg, c√≥ th·ªÉ ch·ªânh l·∫°i s·ªë l∆∞·ª£ng n·∫øu kh√°c)
            const allMemories = Array.from({
                length: 18
            }, (_, i) => `images/memories/${i+1}.jpg`);
            const taskbar = document.getElementById('taskbar');
            let btns = Array.from(taskbar.querySelectorAll('.taskbar-btn'));
            let btnData = btns.map(btn => ({
                link: btn.getAttribute('data-link'),
                alt: btn.querySelector('img').getAttribute('alt')
            }));

            function shuffleTaskbar() {
                // Ho√°n ƒë·ªïi v·ªã tr√≠ n√∫t (Fisher-Yates shuffle)
                for (let i = btns.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [btns[i], btns[j]] = [btns[j], btns[i]];
                    [btnData[i], btnData[j]] = [btnData[j], btnData[i]];
                }
                // L·∫•y 7 ·∫£nh random kh√¥ng tr√πng nhau
                let availableImages = [...allMemories];
                let chosenImages = [];
                for (let i = 0; i < btns.length; i++) {
                    // Random 1 ·∫£nh v√† lo·∫°i kh·ªèi m·∫£ng
                    const idx = Math.floor(Math.random() * availableImages.length);
                    chosenImages.push(availableImages[idx]);
                    availableImages.splice(idx, 1);
                }
                // X√≥a h·∫øt n√∫t c≈©
                while (taskbar.firstChild) taskbar.removeChild(taskbar.firstChild);
                // Th√™m l·∫°i n√∫t theo th·ª© t·ª± m·ªõi, ƒë·ªìng th·ªùi g√°n ·∫£nh kh√¥ng tr√πng nhau
                btns.forEach((btn, idx) => {
                    btn.setAttribute('data-link', btnData[idx].link);
                    btn.querySelector('img').setAttribute('alt', btnData[idx].alt);
                    btn.querySelector('img').src = chosenImages[idx];
                    taskbar.appendChild(btn);
                });
            }
            shuffleTaskbar();
            setInterval(shuffleTaskbar, 2500);
        });
    </script>
</body>

</html>